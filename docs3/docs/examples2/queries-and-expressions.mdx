---
title: "queries and expressions"
description: "Jupyter notebook example for Pixeltable"
---

[![Kaggle](https://kaggle.com/static/images/open-in-kaggle.svg)](https://kaggle.com/kernels/welcome?src=https://github.com/pixeltable/pixeltable/blob/release/docs/notebooks/fundamentals/queries-and-expressions.ipynb)  
[![Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/pixeltable/pixeltable/blob/release/docs/notebooks/fundamentals/queries-and-expressions.ipynb)  
`<a href="https://raw.githubusercontent.com/pixeltable/pixeltable/release/docs/notebooks/fundamentals/queries-and-expressions.ipynb" download>`\{=html\}`<img src="https://img.shields.io/badge/%E2%AC%87-Download%20Notebook-blue" alt="Download Notebook" / />`\{=html\}`</a>`\{=html\}

# Pixeltable Fundamentals

## Section 3: Queries and Expressions

Welcome to Section 3 of the **Pixeltable Fundamentals** tutorial,
**Queries and Expressions**.

In the previous section of this tutorial, [Computed
Columns](https://docs.pixeltable.com/docs/computed-columns), we saw how
to issue queries over Pixeltable tables, such as:

``` python
pop_t.select(yoy_change=(pop_t.pop_2023 - pop_t.pop_2022)).collect()
```

We also saw how to define **computed columns** that become part of the
table and are updated automatically when new rows are inserted:

``` python
pop_t.add_column(yoy_change=(pop_t.pop_2023 - pop_t.pop_2022))
```

Both these examples use the **Pixeltable expression**
`pop_t.pop_2023 - pop_t.pop_2022`. We've seen a number of other
expressions as well, such as the chain of image operations

``` python
t.source.convert('RGBA').rotate(10)
```

and the model invocation

``` python
detr_for_object_detection(
    t.source,
    model_id='facebook/detr-resnet-50',
    threshold="0".8
)
```

Expressions are the basic building blocks of Pixeltable workloads. An
expression can be included in a `select()` statement, which will cause
it to be evaluated dynamically, or in an `add_column()` statement, which
will add it to the table schema as a computed column. In this section,
we'll dive deeper into the different kinds of Pixeltable expressions and
their uses. We'll:

-   Understand the relationship between Pixeltable expressions and query
    execution
-   Survey the different types of expressions
-   Learn more about the Pixeltable type system

To get started, let's import the necessary libraries for this tutorial
and set up a demo directory.

    Connected to Pixeltable database at: postgresql+psycopg://postgres:@/pixeltable?host=/Users/asiegel/.pixeltable/pgdata
    Created directory 'demo'.





    <pixeltable.catalog.dir.Dir at 0x30d6b36d0>

In this tutorial we're going to work with a subset of the MNIST dataset,
a classic reference database of hand-drawn digits. A copy of the MNIST
dataset is hosted on the Hugging Face datasets repository, so wecan use
Pixeltable's built-in Hugging Face data importer to load it into a
Pixeltable table.

    Created table `mnist_tmp_32592145`.
    Inserting rows into `mnist_tmp_32592145`: 50 rows [00:00, 1071.83 rows/s]
    Inserted 50 rows with 0 errors.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
label
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

:::::::::::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>5</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>0</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>4</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA" width="28" / / />
            </div></td>
      <td>1</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA" width="28" / / />
            </div></td>
      <td>9</td>
    </tr>

</tbody>
</table>

### Column References

The most basic type of expression is a **column reference**: that's what
you get when you type, say, `t.image`. An expression such as `t.image`
by itself is just a Python object; it doesn't contain any actual data,
and no data will be loaded until you use the expression in a `select()`
query or `add_column()` statement. Here's what we get if we type
`t.image` by itself:

<style type="text/css">
#T_e1c86_row0_col0 \{
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
\}
</style>
<table id="T_e1c86">
<thead>
</thead>
<tbody>
<tr>
<td id="T_e1c86_row0_col0" className="data row0 col0">
Column 'image' (of table 'demo.mnist')
</td>
</tr>
</tbody>
</table>
<style type="text/css">
#T_c4748 th \{
  text-align: left;
\}
#T_c4748_row0_col0, #T_c4748_row0_col1, #T_c4748_row0_col2 \{
  white-space: pre-wrap;
  text-align: left;
\}
</style>
<table id="T_c4748">
<thead>
<tr>
<th id="T_c4748_level0_col0" className="col_heading level0 col0">
Column Name
</th>
<th id="T_c4748_level0_col1" className="col_heading level0 col1">
Type
</th>
<th id="T_c4748_level0_col2" className="col_heading level0 col2">
Computed With
</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_c4748_row0_col0" className="data row0 col0">
image
</td>
<td id="T_c4748_row0_col1" className="data row0 col1">
Image
</td>
<td id="T_c4748_row0_col2" className="data row0 col2">
</td>
</tr>
</tbody>
</table>

This is true of all Pixeltable expressions: we can freely create them
and manipulate them in various ways, but no actual data will be loaded
until we use them in a query.

### JSON Collections (Dicts and Lists)

Data is commonly presented in JSON format: for example, API responses
and model output often take the shape of JSON dictionaries or lists of
dictionaries. Pixeltable has native support for JSON accessors. To
demonstrate this, let's add a computed column that runs an image
classification model against the images in our dataset.

    Added 50 column values with 0 errors.





    UpdateStatus(num_rows="5"0, num_computed_values="5"0, num_excs="0", updated_cols=[], cols_with_excs=[])

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
classification
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

::::::::::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>\{"labels": [5, 3, 2, 8, 7], "scores": [0.981, 0.013, 0.002, 0.001, 0.001], "label_text": ["5", "3", "2", "8", "7"]\}</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>\{"labels": [0, 6, 9, 8, 1], "scores": [0.997, 0., 0., 0., 0.], "label_text": ["0", "6", "9", "8", "1"]\}</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>\{"labels": [4, 1, 9, 7, 0], "scores": [0.997, 0.001, 0., 0., 0.], "label_text": ["4", "1", "9", "7", "0"]\}</td>
    </tr>

</tbody>
</table>

We see that the output is returned as a dict containing three lists: the
five most likely labels (classes) for the image, the corresponding text
labels (in this case, just the string form of the class number), and the
scores (confidences) of each prediction. The Pixeltable type of the
`classification` column is `pxt.Json`:

<style type="text/css">
#T_8753f_row0_col0 \{
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
\}
</style>
<table id="T_8753f">
<thead>
</thead>
<tbody>
<tr>
<td id="T_8753f_row0_col0" className="data row0 col0">
Table 'demo.mnist'
</td>
</tr>
</tbody>
</table>
<style type="text/css">
#T_6a6d3 th \{
  text-align: left;
\}
#T_6a6d3_row0_col0, #T_6a6d3_row0_col1, #T_6a6d3_row0_col2, #T_6a6d3_row1_col0, #T_6a6d3_row1_col1, #T_6a6d3_row1_col2, #T_6a6d3_row2_col0, #T_6a6d3_row2_col1, #T_6a6d3_row2_col2 \{
  white-space: pre-wrap;
  text-align: left;
\}
</style>
<table id="T_6a6d3">
<thead>
<tr>
<th id="T_6a6d3_level0_col0" className="col_heading level0 col0">
Column Name
</th>
<th id="T_6a6d3_level0_col1" className="col_heading level0 col1">
Type
</th>
<th id="T_6a6d3_level0_col2" className="col_heading level0 col2">
Computed With
</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_6a6d3_row0_col0" className="data row0 col0">
image
</td>
<td id="T_6a6d3_row0_col1" className="data row0 col1">
Image
</td>
<td id="T_6a6d3_row0_col2" className="data row0 col2">
</td>
</tr>
<tr>
<td id="T_6a6d3_row1_col0" className="data row1 col0">
label
</td>
<td id="T_6a6d3_row1_col1" className="data row1 col1">
String
</td>
<td id="T_6a6d3_row1_col2" className="data row1 col2">
</td>
</tr>
<tr>
<td id="T_6a6d3_row2_col0" className="data row2 col0">
classification
</td>
<td id="T_6a6d3_row2_col1" className="data row2 col1">
Json
</td>
<td id="T_6a6d3_row2_col2" className="data row2 col2">
vit_for_image_classification(image,
model_id='farleyknight-org-username/vit-base-mnist')
</td>
</tr>
</tbody>
</table>

Pixeltable provides a range of operators on `Json`-typed output that
behave just as you'd expect. To look up a key in a dictionary, use the
syntax `t.classification['labels']`:

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
classification_labels
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
\[5, 3, 2, 8, 7\]
</td>
</tr>
<tr>
<td>
\[0, 6, 9, 8, 1\]
</td>
</tr>
<tr>
<td>
\[4, 1, 9, 7, 0\]
</td>
</tr>
</tbody>
</table>

You can also use a convenient "attribute" syntax for dictionary lookups.
This follows the standard
[JSONPath](https://en.wikipedia.org/wiki/JSONPath) expression syntax.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
classification_labels
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
\[5, 3, 2, 8, 7\]
</td>
</tr>
<tr>
<td>
\[0, 6, 9, 8, 1\]
</td>
</tr>
<tr>
<td>
\[4, 1, 9, 7, 0\]
</td>
</tr>
</tbody>
</table>

The "attribute" syntax isn't fully general (it won't work for dictionary
keys that are not valid Python identifiers), but it's handy when it
works.

`t.classification.labels` is another Pixeltable expression; you can
think of it as saying, "do the `'labels'` lookup from every dictionary
in the column `t.classification`, and return the result as a new
column." As before, the expression by itself contains no data; it's the
query that does the actual work of retrieving data. Here's what we see
if we just give the expression by itself, without a query:

    classification.labels

Similarly, one can pull out a specific item in a list (for this model,
we're probably mostly interested in the first item anyway):

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
classification_labels0
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
5
</td>
</tr>
<tr>
<td>
0
</td>
</tr>
<tr>
<td>
4
</td>
</tr>
</tbody>
</table>

Or slice a list in the usual manner:

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
classification_labels2
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
\[5, 3\]
</td>
</tr>
<tr>
<td>
\[0, 6\]
</td>
</tr>
<tr>
<td>
\[4, 1\]
</td>
</tr>
</tbody>
</table>

Pixeltable is resilient against out-of-bounds indices or dictionary
keys. If an index or key doesn't exist for a particular row, you'll get
a `None` output for that row.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
classification_notakey
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
None
</td>
</tr>
<tr>
<td>
None
</td>
</tr>
<tr>
<td>
None
</td>
</tr>
</tbody>
</table>

As always, any expression can be used to create a computed column.

    Added 50 column values with 0 errors.

<style type="text/css">
#T_07fb9_row0_col0 \{
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
\}
</style>
<table id="T_07fb9">
<thead>
</thead>
<tbody>
<tr>
<td id="T_07fb9_row0_col0" className="data row0 col0">
Table 'demo.mnist'
</td>
</tr>
</tbody>
</table>
<style type="text/css">
#T_37376 th \{
  text-align: left;
\}
#T_37376_row0_col0, #T_37376_row0_col1, #T_37376_row0_col2, #T_37376_row1_col0, #T_37376_row1_col1, #T_37376_row1_col2, #T_37376_row2_col0, #T_37376_row2_col1, #T_37376_row2_col2, #T_37376_row3_col0, #T_37376_row3_col1, #T_37376_row3_col2 \{
  white-space: pre-wrap;
  text-align: left;
\}
</style>
<table id="T_37376">
<thead>
<tr>
<th id="T_37376_level0_col0" className="col_heading level0 col0">
Column Name
</th>
<th id="T_37376_level0_col1" className="col_heading level0 col1">
Type
</th>
<th id="T_37376_level0_col2" className="col_heading level0 col2">
Computed With
</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_37376_row0_col0" className="data row0 col0">
image
</td>
<td id="T_37376_row0_col1" className="data row0 col1">
Image
</td>
<td id="T_37376_row0_col2" className="data row0 col2">
</td>
</tr>
<tr>
<td id="T_37376_row1_col0" className="data row1 col0">
label
</td>
<td id="T_37376_row1_col1" className="data row1 col1">
String
</td>
<td id="T_37376_row1_col2" className="data row1 col2">
</td>
</tr>
<tr>
<td id="T_37376_row2_col0" className="data row2 col0">
classification
</td>
<td id="T_37376_row2_col1" className="data row2 col1">
Json
</td>
<td id="T_37376_row2_col2" className="data row2 col2">
vit_for_image_classification(image,
model_id='farleyknight-org-username/vit-base-mnist')
</td>
</tr>
<tr>
<td id="T_37376_row3_col0" className="data row3 col0">
pred_label
</td>
<td id="T_37376_row3_col1" className="data row3 col1">
Json
</td>
<td id="T_37376_row3_col2" className="data row3 col2">
classification.label_text\[0\]
</td>
</tr>
</tbody>
</table>

Finally, just as it's possible to extract items from lists and
dictionaries using Pixeltable expressions, you can also construct new
lists and dictionaries: just package them up in the usual way.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
col_1
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

:::::::::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>\{"ground_truth": "5", "prediction": "5", "is_correct": true, "engine": "pixeltable"\}</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>\{"ground_truth": "0", "prediction": "0", "is_correct": true, "engine": "pixeltable"\}</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>\{"ground_truth": "4", "prediction": "4", "is_correct": true, "engine": "pixeltable"\}</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA" width="28" / / />
            </div></td>
      <td>\{"ground_truth": "1", "prediction": "1", "is_correct": true, "engine": "pixeltable"\}</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA" width="28" / / />
            </div></td>
      <td>\{"ground_truth": "9", "prediction": "9", "is_correct": true, "engine": "pixeltable"\}</td>
    </tr>

</tbody>
</table>

### UDF Calls

UDF calls are another common type of expression. We've seen them
throughout the tutorial; in fact, we used one a moment ago when we added
a model invocation to our workload:

``` python
vit_for_image_classification(
    t.image,
    model_id='farleyknight-org-username/vit-base-mnist'
)
```

This calls the `vit_for_image_classification` UDF in the
`pxt.functions.huggingface` module. Note that
`vit_for_image_classification` is a Pixeltable UDF, not an ordinary
Python function. (UDFs were first discussed in the [Tables and Data
Operations](https://docs.pixeltable.com/docs/computed-columns) section
of this tutorial.) You can think of a Pixeltable UDF as a function that
operates on columns of data, iteratively applying an underlying
operation to each row in the column (or columns). In this case,
`vit_for_image_classification` operates on `t.image`, running the model
against every image in the column.

Notice that in addition to the column `t.image`, this call to
`vit_for_image_classification` also takes a constant argument specifying
the `model_id`. Any UDF call argument may be a constant, and the
constant value simply means "use this value for every row being
evaluated".

You can always compose Pixeltable expressions to form more complicated
ones; here's an example that runs the model against a 90-degree rotation
of every image in the sample and extracts the label. Not surprisingly,
the model doesn't perform as well on the rotated images.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
rot_label
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

::::::::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>4</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>0</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>5</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA" width="28" / / />
            </div></td>
      <td>1</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA" width="28" / / />
            </div></td>
      <td>8</td>
    </tr>

</tbody>
</table>

::: \{.alert .alert-block .alert-info\}
Note that we employed a useful trick here: we assigned an expression to
the variable `<code>`\{=html\}rot_model_result`</code>`\{=html\} for later
reuse. Every Pixeltable expression is a Python object, so you can freely
assign them to variables, reuse them, compose them, and so on. Remember
that nothing actually happens until the expression is used in a query -
so in this example, setting the variable
`<code>`\{=html\}rot_model_result`</code>`\{=html\} doesn't itself result in
any data being retrieved; that only happens later, when we actually use
it in the `<code>`\{=html\}select()`</code>`\{=html\} query.
:::

There are a large number of built-in UDFs that ship with Pixeltable; you
can always refer back to the [API
Documentation](https://pixeltable.github.io/pixeltable/) for details.

### Method Calls

Many built-in UDFs allow a convenient alternate syntax. The following
two expressions are exactly equivalent:

`a` and `b` can always be used interchangeably in queries, with
identical results. Just like in standard Python classes, whenever
Pixeltable sees the **method call** `t.image.rotate(90)`, it interprets
it as a **function call** `pxt.functions.image.rotate(self, 90)`, with
(in this case) `self` equal to `t.image`.

Any method call can also be written as a function call, but (just like
in standard Python) not every function call can be written as a method
call. For example, the following won't work:

``` python
t.image.vit_for_image_classification(
    model_id='farleyknight-org-username/vit-base-mnist'
)
```

That's because `vit_for_image_classification` is part of the
`pxt.functions.huggingface` module, not the core module
`pxt.functions.image`. Most Pixeltable types have a corresponding **core
module** of UDFs that can be used as method calls (`pxt.functions.image`
for `Image`; `pxt.functions.string` for `String`; and so on), described
fully in the [API
Documentation](https://pixeltable.github.io/pixeltable/).

### Arithmetic and Boolean Operations

Expressions can also be combined using standard arithmetic and boolean
operators. As with everything else, arithmetic and boolean expressions
are operations on columns that (when used in a query) are applied to
every row.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
label
</th>
<th>
col_2
</th>
<th>
col_3
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

::::::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>5</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>0</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>4</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA" width="28" / / />
            </div></td>
      <td>1</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA" width="28" / / />
            </div></td>
      <td>9</td>
      <td>False</td>
      <td>False</td>
    </tr>

</tbody>
</table>

When you use a `where` clause in a query, you're giving it a Pixeltable
expression, too (a boolean-valued one).

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

:::::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADwBgCdASocABwAPm0qkkWkIiGYDAYAQAbEtIAIhnis8xnNLt1SedPRE/3CElWOkCohbusdE8Exkg1v+28U/j4AAP7/Ob1SSt9enIn22ereRH92vtIdw//DLI8H/4XGHKJtj+OXU6oraX84vvoX+Rouf6KLrkvONBeeOgoRpAqe8AFM/6GZGh/O/+RWubrAbil9NEEbdjXL/EzSXaciIndxXrGjiBH85QBiHoGcS0B2Z5oOHWTO/0PbyNdy1SD8pbdz/lg/7i6l0tPbSEKBTAG5aM8gfQ4ArPZ/2/67Na0kWD9Fod/0H8+y/ezeMWktl+RDvw2aK3OhSyy4eR0AAAAA" width="28" / / />
            </div></td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAACwBgCdASocABwAPm0wkkakIyGhKA1QgA2JaQARC9Dt32AfGtnSecv+EGd/9FgXQHVH5VOz96seKP4mQc9AAAD+/m8gEE76f1ZGasHbwFt/zP0v7A1TApQXtGDdav5DLxSwuyy9ufIKOkpsrkh9dRFThdn41ru3bQfjDsdKV25NQemH6vz2X2sak6iQquvf+NW/8/Giv/ePpP/hzPui2oFaMgLIv0agk/vvaoQSuLQty8gwdLyXbf7W4eKyu3m9pTxhSY+U8XPiUdU0eh/k/6b8CHpfaK6vnV3o3dGkBCsM+UAf6Q3/7JKf/0eeH99r+3ZzwKqgx/krdmQZ/1j3B+1bnkWaKqf1cn9Bdv+ezjDTVwpkr/wAAAAA" width="28" / / />
            </div></td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRuAAAABXRUJQVlA4INQAAADwBQCdASocABwAPm00lkgkIyIhKAgAgA2JaQAJxBNIH4q653k9ZnKDIdKewmnw+s7opTeH66EvAAD+/3wq1F/CRP57+0DjeH1TiBbV9vkhK3KM/5D54RvJQFZK+cbD2zKzyacxKwbS7V8ur9TwNQ9YFIxIup5YC23B/2zGAVPgfYHNkRD/qYx6whZ660BOkr18TKFHgea3+mv2krfPJ1FsLjrfwki/8Se2YKopW9mtpoMaVrtpPifykr6ueTzxu/63j+RuT//Eg/ZerXvxoH1oFCAAAA==" width="28" / / />
            </div></td>
    </tr>

</tbody>
</table>

The following example shows how boolean expressions can be assigned to
variables and used to form more complex expressions.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
label
</th>
<th>
rot_label
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

::::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>5</td>
      <td>4</td>
    </tr>

</tbody>
</table>

Notice that to form a logical "and", we wrote

``` python
(t.label == '5') & (rot_label != '5')
```

using the operator `&` rather than `and`. Likewise, to form a logical
"or", we'd use `|` rather than `or`:

``` python
(t.label == '5') | (rot_label != '5')
```

For logical negation:

``` python
~(t.label == '5')
```

This follows the convention used by other popular data-manipulation
frameworks such as Pandas, and it's necessary because the Python
language does not allow the meanings of `and`, `or`, and `not` to be
customized. There is one more instance of this to be aware of: to check
whether an expression is `None`, it's necessary to write (say)

``` python
t.label == None
```

rather than `t.label is None`, for the same reason.

### Arrays

In addition to lists and dicts, Pixeltable also has built-in support for
numerical arrays. A typical place where arrays show up is as the output
of an embedding.

    Added 50 column values with 0 errors.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
clip
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

:::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>[-0.052 -0.259 -0.481 -0.628  0.053 -0.032 ...  0.079  0.087 -0.346  0.904  0.037 -0.161]</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>[ 0.063 -0.174 -0.263 -0.596  0.218 -0.332 ...  0.295  0.028  0.001  0.823 -0.149 -0.163]</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>[-0.059 -0.222 -0.251 -0.503 -0.112 -0.233 ...  0.038  0.107 -0.329  0.765 -0.363  0.206]</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA" width="28" / / />
            </div></td>
      <td>[ 0.098 -0.196 -0.42  -0.589  0.111 -0.107 ...  0.266  0.179 -0.143  1.023 -0.136  0.092]</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA" width="28" / / />
            </div></td>
      <td>[-0.046 -0.147 -0.455 -0.576  0.228 -0.115 ...  0.521  0.086 -0.24   0.786  0.098  0.171]</td>
    </tr>

</tbody>
</table>

The underlying Python type of `pxt.Array` is an ordinary NumPy array
(`np.ndarray`), so that an array-typed column is a column of NumPy
arrays (in this example, representing the embedding output of each image
in the table). As with lists, arrays can be sliced in all the usual
ways.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
col_0
</th>
<th>
col_1
</th>
<th>
col_2
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
-0.052
</td>
<td>
\[-0.032 0.07 1.117 -0.037 -0.158\]
</td>
<td>
\[ 0.904 0.037 -0.161\]
</td>
</tr>
<tr>
<td>
0.063
</td>
<td>
\[-0.332 -0.201 1.023 -0.003 -0.094\]
</td>
<td>
\[ 0.823 -0.149 -0.163\]
</td>
</tr>
<tr>
<td>
-0.059
</td>
<td>
\[-0.233 0.238 0.864 -0.135 -0.017\]
</td>
<td>
\[ 0.765 -0.363 0.206\]
</td>
</tr>
<tr>
<td>
0.098
</td>
<td>
\[-0.107 0.038 1.081 -0.111 0.172\]
</td>
<td>
\[ 1.023 -0.136 0.092\]
</td>
</tr>
<tr>
<td>
-0.046
</td>
<td>
\[-0.115 0.066 1.089 -0.017 0.105\]
</td>
<td>
\[0.786 0.098 0.171\]
</td>
</tr>
</tbody>
</table>

### Ad hoc UDFs with `apply`

We've now seen the most commonly encountered Pixeltable expression
types. There are a few other less commonly encountered expressions that
are occasionally useful.

You can use `apply` to map any Python function onto a column of data.
You can think of `apply` as a quick way of constructing an "on-the-fly"
UDF for one-off use.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
dumps
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
b\'`\x80`\{=tex\}`\x`\{=tex\}02cnumpy.core.multiarray`\n`\{=tex\}*reconstruct`\nq`\{=tex\}`\x`\{=tex\}00cnumpy`\nndarray`\{=tex\}`\nq`\{=tex\}`\x`\{=tex\}01K`\x00`\{=tex\}`\x`\{=tex\}85q`\x`\{=tex\}02c_codecs`\nencode`\{=tex\}`\nq`\{=tex\}`\x`\{=tex\}03X`\x01`\{=tex\}`\x00`\{=tex\}`\x00`\{=tex\}`\x`\{=tex\}00bq`\x`\{=tex\}04X`\x06`\{=tex\}`\x00`\{=tex\}`\x00`\{=tex\}`\x`\{=tex\}00latin1q`\x05`\{=tex\}`\x`\{=tex\}86q`\x`\{=tex\}06Rq`\x07`\{=tex\}`\x`\{=tex\}87q`\x`\{=tex\}08Rq`\t(`\{=tex\}K`\x`\{=tex\}01M`\x00`\{=tex\}`\x02`\{=tex\}`\x`\{=tex\}85q`\ncnumpy`\{=tex\}`\ndtype`\{=tex\}`\nq`\{=tex\}`\x`\{=tex\}0bX`\x02`\{=tex\}`\x00`\{=tex\}`\x00`\{=tex\}`\x`\{=tex\}00f4q`\x`\{=tex\}0c`\x89`\{=tex\}`\x88`\{=tex\}`\x`\{=tex\}87q`\rRq`\{=tex\}`\x`\{=tex\}0e(K`\x`\{=tex\}03X`\x01`\{=tex\}`\x00`\{=tex\}`\x00`\{=tex\}`\x00`\{=tex\}\<q`\x`\{=tex\}0fNNNJ`\xff`\{=tex\}`\xff`\{=tex\}`\xff`\{=tex\}`\xffJ`\{=tex\}`\xff`\{=tex\}`\xff`\{=tex\}`\xff`\{=tex\}`\xffK`\{=tex\}`\x`\{=tex\}00tq`\x`\{=tex\}10b`\x`\{=tex\}89h`\x`\{=tex\}03X`\t\x`\{=tex\}0c`\x00`\{=tex\}`\x`\{=tex\}00Y`\xc3`\{=tex\}`\xadV`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\x98`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x84`\{=tex\}`\xc2`\{=tex\}`\xbeIw`\{=tex\}`\xc3`\{=tex\}`\xb6`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\x13`\{=tex\}`\xc2`\{=tex\}`\xb0`\{=tex\}
`\xc2`\{=tex\}`\xbf`\{=tex\}*\{Y=gt`\x02`{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\x12`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9e`\xc2`\{=tex\}`\x`\{=tex\}8e=}`\xc3`\{=tex\}`\xa9`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8e?+)`\x18`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\x90`\{=tex\}`\x05`\{=tex\}\"`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xb81`\{=tex\}`\x`\{=tex\}0f?-,`\xc3`\{=tex\}`\x84`\{=tex\}\>`\xc2`\{=tex\}`\x`\{=tex\}9a\^`\xc3`\{=tex\}`\xb3`\{=tex\}\>`\xc2`\{=tex\}`\x`\{=tex\}8alD`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x845`\{=tex\}
`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xba`\{=tex\}:`\xc2`\{=tex\}`\xa4`\{=tex\}=X&#x27;`\xc2`\{=tex\}`\xb8`\{=tex\}\>`\xc3`\{=tex\}`\xa4`\{=tex\}&#x27;w`\xc2`\{=tex\}`\xbb`\{=tex\}`\xc3`\{=tex\}`\x84`\{=tex\}=#`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x95`\{=tex\}`\xc2`\{=tex\}`\xb3`\{=tex\}@=@\|`\x19`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xb3`\{=tex\}`\xc3`\{=tex\}`\xaf`\{=tex\}`\xc2`\{=tex\}`\x82`\{=tex\}\>`\xc2`\{=tex\}`\xbc`\{=tex\}`\xc3`\{=tex\}`\xbeF`\{=tex\}`\xc2`\{=tex\}`\xbeg`\{=tex\}`\x10`\{=tex\}`\xc2`\{=tex\}`\x80`\{=tex\}\>`\xc3`\{=tex\}`\xa2`\{=tex\}`\xc3`\{=tex\}`\xb3`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8f\<`\xc2`\{=tex\}`\xaa`\{=tex\}`\x18`\{=tex\}`\xc3`\{=tex\}`\x87`\{=tex\}=`\xc2`\{=tex\}`\xa9`\{=tex\}`\xc3`\{=tex\}`\x83`\{=tex\}`\x14`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}13o2=k)`\xc3`\{=tex\}`\x97`\{=tex\}\<`\x`\{=tex\}1aA`\x16`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x98`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}96U\>`\xc2`\{=tex\}`\x97`\{=tex\}`\x15`\{=tex\}`\xc2`\{=tex\}`\xac`\{=tex\}`\xc2`\{=tex\}`\xbez`\{=tex\}`\xc2`\{=tex\}`\xb3`\{=tex\}`\xc2`\{=tex\}`\xab`\{=tex\}=(`\xc2`\{=tex\}`\xb10`\{=tex\}`\xc2`\{=tex\}`\xbdd`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}83P`\xc2`\{=tex\}`\xbeg`\{=tex\}`\xc2`\{=tex\}`\x83`\{=tex\}\[`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}03f`\xc2`\{=tex\}`\x`\{=tex\}9b=T`\xc2`\{=tex\}`\x`\{=tex\}8c`\xc3`\{=tex\}`\xb4`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\xb4`\{=tex\}`\xc2`\{=tex\}`\x87`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9b`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}15S`\xc2`\{=tex\}`\x81`\{=tex\}`\xc2`\{=tex\}`\xbfa`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}90O=`\xc3`\{=tex\}`\xae`\{=tex\}!,`\xc2`\{=tex\}`\xbe`\{=tex\}%`\xc3`\{=tex\}`\x98`\{=tex\}`\xc2`\{=tex\}`\x98`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xbf`\{=tex\}`\x06`\{=tex\}`\x04`\{=tex\}`\xc2`\{=tex\}`\xbf`\{=tex\}.`\xc3`\{=tex\}`\xbb`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9a`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x94`\{=tex\}\|@?h`\x16`\{=tex\}\]\>`\xc3`\{=tex\}`\xba`{=tex}}`\x00`\{=tex\}\>h`\xc2`\{=tex\}`\xb0`\{=tex\}`\xc2`\{=tex\}`\xa4`\{=tex\}=V`\xc3`\{=tex\}`\x94`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9e`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xab`\{=tex\}&L=`\x`\{=tex\}1f`\xc3`\{=tex\}`\xa9`\{=tex\}@`\xc2`\{=tex\}\'
......
b\'`\x01`\{=tex\}`\x11`\{=tex\}\>uFw\>`\xc2`\{=tex\}`\x`\{=tex\}9f`\xc2`\{=tex\}`\x`\{=tex\}86G`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xbc`\{=tex\}`\xc3`\{=tex\}`\xac`\{=tex\};`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\xa8`\{=tex\}(%\>`\xc2`\{=tex\}`\x`\{=tex\}8bs`\x`\{=tex\}0c\>/`\x`\{=tex\}0bx\<`\xc3`\{=tex\}`\x85`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8f`\xc3`\{=tex\}`\xbf`\{=tex\}=`\xc3`\{=tex\}`\x83`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9b`\xc3`\{=tex\}`\x87`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\xa`\{=tex\}0M6?`\xc3`\{=tex\}`\x`\{=tex\}8b`\xc2`\{=tex\}`\x`\{=tex\}8d`\xc2`\{=tex\}`\xb1`\{=tex\}\>`\xc2`\{=tex\}`\x`\{=tex\}9chP=`\xc3`\{=tex\}`\x`\{=tex\}8cG1`\xc2`\{=tex\}`\xbcc`\{=tex\}`\xc3`\{=tex\}`\xa0`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9c\>`\xc3`\{=tex\}`\xb`\{=tex\}3a`\xc3`\{=tex\}`\x97`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\x02`\{=tex\}`\xc2`\{=tex\}`\x89`\{=tex\}`\xc2`\{=tex\}`\xb9`\{=tex\}\>:`\x02`\{=tex\}`\x`\{=tex\}1d=`\xc3`\{=tex\}`\x97`\{=tex\}`\xc3`\{=tex\}`\x94`\{=tex\}:`\xc2`\{=tex\}`\xbeC`\{=tex\}`\xc3`\{=tex\}`\xb5`\{=tex\}*`\xc2`\{=tex\}`\xbf`\{=tex\}`\x`\{=tex\}0b2z`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x90`\{=tex\}.`\xc2`\{=tex\}`\xb3`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x88`\{=tex\}`\xc2`\{=tex\}`\xa9`\{=tex\}`\x03`\{=tex\}\>`\xc2`\{=tex\}`\x`\{=tex\}8b\[`\xc2`\{=tex\}`\xa0`\{=tex\}=*\[`\xc3`\{=tex\}`\xbc`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\x`\{=tex\}0f`\xc2`\{=tex\}`\x91`\{=tex\}`\xc2`\{=tex\}`\x89`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8c`\xc2`\{=tex\}`\x86`\{=tex\}%`\xc2`\{=tex\}`\xbe5`\{=tex\}`\xc2`\{=tex\}`\xae`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9c`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x86`\{=tex\}`\xc3`\{=tex\}`\xbd`\{=tex\}`\n`\{=tex\}`\xc2`\{=tex\}`\xbf`\{=tex\}`\x05`\{=tex\}`\xc2`\{=tex\}`\xaa`\{=tex\}`\xc2`\{=tex\}`\x90`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9f`\xc2`\{=tex\}`\x86`\{=tex\}`\xc3`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\xbdw`\{=tex\}`\xc2`\{=tex\}`\xaeE`\{=tex\}`\xc2`\{=tex\}`\xbeb`\{=tex\}`\xc2`\{=tex\}`\x80`\{=tex\}`\xc3`\{=tex\}`\x83`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xab4`\{=tex\}`\x04`\{=tex\}\>`\xc3`\{=tex\}`\xb6`\{=tex\}`\xc2`\{=tex\}`\xa6`\{=tex\}`\xc2`\{=tex\}`\xb6`\{=tex\}`\xc2`\{=tex\}`\xbd2`\{=tex\}`\x`\{=tex\}0f3?`\xc2`\{=tex\}`\x89`{=tex}}L\>`\xc3`\{=tex\}`\xa`\{=tex\}4D`\xc2`\{=tex\}`\x85`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\x08`\{=tex\}`\x`\{=tex\}1d`\xc2`\{=tex\}`\x`\{=tex\}9e`\xc2`\{=tex\}`\xbeR`\{=tex\}`\xc3`\{=tex\}`\xaa`\{=tex\}`\xc3`\{=tex\}`\xa8`\{=tex\}=`\xc3`\{=tex\}`\xa03`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8c\>`\xc3`\{=tex\}`\xb8`\{=tex\}`\xc3`\{=tex\}`\xb6`\{=tex\}
\>`\xc2`\{=tex\}`\x`\{=tex\}8a`\xc2`\{=tex\}`\xac`\{=tex\}@`\xc2`\{=tex\}`\xbd`\{=tex\}`\x`\{=tex\}1f`\xc3`\{=tex\}`\x`\{=tex\}9ba`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xbax`\{=tex\}`\xc3`\{=tex\}`\x87`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}7f`\x08`\{=tex\}`\x`\{=tex\}1c`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9a`\xc3`\{=tex\}`\xb6`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x94`\{=tex\}%`\xc2`\{=tex\}`\xb5`\{=tex\}\<`\xc3`\{=tex\}`\x84`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8f%`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}99O(\>`\xc3`\{=tex\}`\xb`\{=tex\}4S`\r=`\{=tex\}\|`\x02`\{=tex\}`\xc2`\{=tex\}`\x88`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xa`\{=tex\}7C`\xc2`\{=tex\}`\xb5`\{=tex\}\>
u`\x`\{=tex\}1a`\xc2`\{=tex\}`\xbc`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8b!M\>`\xc3`\{=tex\}`\x`\{=tex\}83k`\xc2`\{=tex\}`\x`\{=tex\}8c\>4\\`\x02`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}1f`\xc2`\{=tex\}`\x89`\{=tex\}`\xc3`\{=tex\}`\x84`\{=tex\}=o`\xc2`\{=tex\}`\xa2`\{=tex\}?`\xc2`\{=tex\}`\xbft`\{=tex\}`\xc2`\{=tex\}`\xacS`\{=tex\}=`\x11`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}89s`\xc2`\{=tex\}`\xbeE`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}83f`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x87`\{=tex\}`\xc3`\{=tex\}`\xa4`\{=tex\}`\xc2`\{=tex\}`\x84`\{=tex\}\>`\xc2`\{=tex\}`\x`\{=tex\}8c\^`\xc2`\{=tex\}`\xae`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8ep}\<`\xc3\xa4\xc2\xb9=\xc3\x93#\xc3\xa9\xc2\xbd\xc2\x8c\xc3\xaa\xc3\x96\xc2\xbc\xc3\xa7]G\xc2\xbe\xc3\x80\x1aV=\x16\xc2\x84X\xc2\xbeV"\n9\nH\x15=\xc2\x82\xc3\xb5\xc3\xaf>T\xc2\xb1B\xc2\xbe\xc3\xb7\xc2\x9b\xc2\xa1=\xc2\x9b\xc3\x8c\xc2\xb1=\xc2\xbc\n\xc2\xb1\xc2\xbe\x08Mg?\x1e\xc2\xa6\x16=\xc3\xad\xc3\xaa\$\xc2\xbeq\x11h\x05\x86q\x12Rq\x13tq\x14b.&#x27;</td>     </tr>     <tr>       <td>b&#x27;\x80\x02cnumpy.core.multiarray\n_reconstruct\nq\x00cnumpy\nndarray\nq\x01K\x00\x85q\x02c_codecs\nencode\nq\x03X\x01\x00\x00\x00bq\x04X\x06\x00\x00\x00latin1q\x05\x86q\x06Rq\x07\x87q\x08Rq\t(K\x01M\x00\x02\x85q\ncnumpy\ndtype\nq\x0bX\x02\x00\x00\x00f4q\x0c\x89\x88\x87q\rRq\x0e(K\x03X\x01\x00\x00\x00<q\x0fNNNJ\xff\xff\xff\xffJ\xff\xff\xff\xffK\x00tq\x10b\x89h\x03X/\x0c\x00\x00*"\xc2\x80=\xc3\x8av2\xc2\xbe\xc2\x83\xc2\x99\xc2\x86\xc2\xbe0\xc2\x9a\x18\xc2\xbf\tO_>j,\xc2\xaa\xc2\xbeR\xc3\x87M\xc2\xbe\xc2\xae\xc3\xaf\xc2\x82?k,+\xc2\xbb\xc2\xa1\x1f\xc3\x81\xc2\xbd\xc3\xa0A\xc3\x89>\xc2\x8f\xc2\xa0\xc3\xa9=\x19\xc3\x9c\xc3\x9f>\xc3\x9d\xc2\xa4\xc2\xb1\xc2\xbee\xc3\xa8\xc3\xae\xc2\xbc\xc2\xa2\xc2\xad\$=\xc2\x9e26>A~\xc2\x9a\xc2\xbcm\xc3\x92\xc3\x8b<J\r\xc3\x88=\x0b1\xc2\x8f\xc2\xbd\xc2\x9b\xc2\x8b+\xc2\xbd\xc2\x88\xc2\x86\xc2\xbc<?|`\>U`\xc2`\{=tex\}`\x89`\{=tex\}`\xc2`\{=tex\}`\x99`\{=tex\}`\xc2`\{=tex\}`\xbc`\{=tex\}&#x27;`\xc3`\{=tex\}`\x87`\{=tex\}`\xc3`\{=tex\}`\x99`\{=tex\}=`\x`\{=tex\}17g`\xc2`\{=tex\}`\xa6`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xb8`\{=tex\}`\x02`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9d`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x87`\{=tex\};`\xc2`\{=tex\}`\xa6`\{=tex\}=`\xc3`\{=tex\}`\x`\{=tex\}88Hp`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x85`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9c`\xc3`\{=tex\}`\x85`\{=tex\}\<`\x`\{=tex\}0e`\xc3`\{=tex\}`\xb6`\{=tex\}\\`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\x93`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8c=e`\xc3`\{=tex\}`\xa8`\{=tex\}`\x11`\{=tex\}=`\xc3`\{=tex\}`\xb1`\{=tex\}`\xc2`\{=tex\}`\xa9`\{=tex\}`\x05`\{=tex\}`\xc2`\{=tex\}`\xbeRg`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9d`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x84`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9e`\x12`\{=tex\}\>`\xc2`\{=tex\}`\xa0`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8c`\x00`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\r\xc3`\{=tex\}`\x`\{=tex\}9b`\xc2`\{=tex\}`\xaa`\{=tex\}`\xc2`\{=tex\}`\xbdB`\{=tex\}`\xc2`\{=tex\}`\xb1`\{=tex\}`\xc2`\{=tex\}`\x92`\{=tex\}`\xc2`\{=tex\}`\xbf`\{=tex\}`\xc2`\{=tex\}`\x86`\{=tex\}`\x06`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9a`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\xa1`\{=tex\}`\xc2`\{=tex\}`\x81`\{=tex\}`\xc2`\{=tex\}`\x94`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}99oz`\xc2`\{=tex\}`\xbej`\{=tex\}`\x01`\{=tex\}`\xc2`\{=tex\}`\x91`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\xbb`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}84n`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}0f,`\xc2`\{=tex\}`\x`\{=tex\}8a?`\xc3`\{=tex\}`\x94`\{=tex\}`\x`\{=tex\}17J`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\xae`\{=tex\},\<\>`\xc2`\{=tex\}`\xbcU`\{=tex\}`\xc3`\{=tex\}`\x83`\{=tex\}\'
......
b\'\<2`\xc2`\{=tex\}`\xa1`\{=tex\}`\x15`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xb9`\{=tex\}\<`\xc2`\{=tex\}`\x89`\{=tex\}=`\xc2`\{=tex\}`\xa3`\{=tex\}\[G\>iQj\>`\xc3`\{=tex\}`\xa6`\{=tex\}`\xc3`\{=tex\}`\xaee`\{=tex\}\>`\xc2`\{=tex\}`\x855`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9c`\xc2`\{=tex\}`\xbd`\{=tex\}`\x`\{=tex\}0b`\xc2`\{=tex\}`\x`\{=tex\}8b`\xc2`\{=tex\}`\x`\{=tex\}9a`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xa0`\{=tex\}`\xc2`\{=tex\}`\x89`\{=tex\}`\x11`\{=tex\}?`\x`\{=tex\}1e\]`\xc2`\{=tex\}`\xbe`\{=tex\}\>`\x00`\{=tex\}`\xc2`\{=tex\}`\x84`\{=tex\}`\xc2`\{=tex\}`\x83`\{=tex\}\>`\xc3`\{=tex\}`\x`\{=tex\}9ar`\xc2`\{=tex\}`\x84`\{=tex\}`\xc2`\{=tex\}\\xbe\{`\xc3`{=tex\}`\xa4`\{=tex\}`\xc2`\{=tex\}`\x87`\{=tex\}\>`\xc2`\{=tex\}`\x`\{=tex\}9aQ`\x14`\{=tex\}`\xc2`\{=tex\}`\xbeA`\{=tex\}`\xc2`\{=tex\}`\xa0`\{=tex\}.\>`\xc3`\{=tex\}`\x`\{=tex\}9dX`\xc2`\{=tex\}`\xbf`\{=tex\}`\xc2`\{=tex\}`\xbdT`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8d`\xc3`\{=tex\}`\x93`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9d`\xc3`\{=tex\}`\xb2`\{=tex\}`\xc3`\{=tex\}`\xa2`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x93`\{=tex\}`\xc2`\{=tex\}`\x86`\{=tex\}`\xc3`\{=tex\}`\xbc`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8b`\xc3`\{=tex\}`\xb0`\{=tex\}`\t\xc2`\{=tex\}`\xbf`\{=tex\}`\xc2`\{=tex\}`\xa8`\{=tex\}`\xc3`\{=tex\}`\xaa1`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x93`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8b`\xc2`\{=tex\}`\x92`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9a\^&#x27;`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}7f`\xc2`\{=tex\}`\xa8`\{=tex\}`\xc2`\{=tex\}`\xa3`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}1b`\xc3`\{=tex\}`\xab`\{=tex\}`\xc3`\{=tex\}`\x99`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\xba`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}84i`\xc2`\{=tex\}`\xbeR`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}8bF`\xc2`\{=tex\}`\xbf`\{=tex\}`\xc3`\{=tex\}`\x82`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8dv\>K`\xc2`\{=tex\}`\xb1`\{=tex\}`\xc3`\{=tex\}`\xb5`\{=tex\}\<oZ`\xc2`\{=tex\}`\x`\{=tex\}8e;`\xc3`\{=tex\}`\xb`\{=tex\}8H`\xc2`\{=tex\}`\x95`\{=tex\}`\xc2`\{=tex\}`\xbe1`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}81J\>`\xc2`\{=tex\}`\x`\{=tex\}8a@`\xc2`\{=tex\}`\xa5`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\xba`\{=tex\},`\xc2`\{=tex\}`\x`\{=tex\}8b?2`\x`\{=tex\}1b`\xc3`\{=tex\}`\xbb`\{=tex\}\<\>*\[`\xc2`\{=tex\}`\xbew`\{=tex\}`\x`\{=tex\}1e`\xc3`\{=tex\}`\xa2`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\x90`\{=tex\}`\xc3`\{=tex\}`\x99`\{=tex\}`\x`\{=tex\}1d`\xc2`\{=tex\}`\xbc7`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9e`\xc2`\{=tex\}`\xbf`\{=tex\}\>M2`\xc2`\{=tex\}`\xbf`\{=tex\}\>I
0`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\x87`\{=tex\}@`\x`\{=tex\}0b`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xa1`\{=tex\}-A`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xb7`\{=tex\}`\x03`\{=tex\}`\xc2`\{=tex\}`\x99`\{=tex\}`\xc2`\{=tex\}`\xbdg`\{=tex\}`\xc3`\{=tex\}`\x91`\{=tex\}`\xc3`\{=tex\}`\x85`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x85`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9fy=`\xc3`\{=tex\}`\x`\{=tex\}8b`\x02`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9f`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}9a`\xc3`\{=tex\}`\xa52`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xb4`\{=tex\}-`\xc2`\{=tex\}`\x`\{=tex\}8e=`\xc2`\{=tex\}`\x80`\{=tex\}`\xc2`\{=tex\}`\x87`\{=tex\}`\xc2`\{=tex\}`\xa7`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc2`\{=tex\}`\x87`\{=tex\}`\n`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9d\>`\xc3`\{=tex\}`\x91`\{=tex\}`\n`\{=tex\}`\xc3`\{=tex\}`\xa8`\{=tex\}=X`\xc3`\{=tex\}`\x`\{=tex\}87S`\xc2`\{=tex\}`\xbd`\{=tex\}`\xc3`\{=tex\}`\xb3`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}94H\>z`\x`\{=tex\}11F`\xc2`\{=tex\}`\xbexD`\{=tex\}`\x08`\{=tex\}\>`\xc2`\{=tex\}`\x99`\{=tex\}`\x13`\{=tex\}`\x`\{=tex\}0e`\xc2`\{=tex\}`\xbf`\{=tex\}`\x`\{=tex\}01b*\>`\xc3`\{=tex\}`\x`\{=tex\}8e`\xc2`\{=tex\}`\x`\{=tex\}9c`\xc2`\{=tex\}`\xb5`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\x85`\{=tex\}`\xc3`\{=tex\}`\xa`\{=tex\}2H\>\*`\xc3`\{=tex\}`\xb`\{=tex\}7i\>`\x13`\{=tex\}`\xc2`\{=tex\}`\xa3`\{=tex\}`\xc3`\{=tex\}`\xb6`\{=tex\}=`\xc3`\{=tex\}`\x`\{=tex\}9co`\xc2`\{=tex\}`\x86`\{=tex\}=\"`\x`\{=tex\}00u\<`\xc2`\{=tex\}`\x`\{=tex\}8cR`\xc3`\{=tex\}`\x80`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\x`\{=tex\}0c`\xc2`\{=tex\}`\xab`\{=tex\}`\x00`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xb7`\{=tex\}:V`\xc2`\{=tex\}`\xbd`\{=tex\}`\x`\{=tex\}0e`\xc2`\{=tex\}`\x89`\{=tex\}`\xc2`\{=tex\}`\xa9`\{=tex\}=9`\xc2`\{=tex\}`\xbf`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8a`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xa3`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8c`\xc3`\{=tex\}`\xa8`\{=tex\}\<`\xc2`\{=tex\}`\x90`\{=tex\}`\xc3`\{=tex\}`\xad`\{=tex\}`\xc3`\{=tex\}`\x88`\{=tex\}=`\xc3`\{=tex\}`\x81`\{=tex\}`\x07`\{=tex\}`\xc2`\{=tex\}`\xbd`\{=tex\}\>`\xc2`\{=tex\}`\x90`\{=tex\}&N`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc3`\{=tex\}`\xa8`\{=tex\}`\xc3`\{=tex\}`\x`\{=tex\}8d`\xc2`\{=tex\}`\x96`\{=tex\}\>`\xc2`\{=tex\}`\x`\{=tex\}85d`\xc3`\{=tex\}`\xa3`\{=tex\}\<I`\xc3`\{=tex\}`\xae`\{=tex\}`\xc2`\{=tex\}`\x`\{=tex\}9e:?`\xc2`\{=tex\}`\x`\{=tex\}99R?`\xc2`\{=tex\}`\x`\{=tex\}9d2`\x18`\{=tex\}`\xc2`\{=tex\}`\xbe`\{=tex\}`\xc2`\{=tex\}`\xa2`\{=tex\}`\x`\{=tex\}0e&#x27;`\xc2`\{=tex\}`\xbeq`\{=tex\}`\x`\{=tex\}11h`\x05`\{=tex\}`\x`\{=tex\}86q`\x`\{=tex\}12Rq`\x`\{=tex\}13tq`\x`\{=tex\}14b.\'
</td>
</tr>
</tbody>
</table>

Note, however, that if the function you're `apply`ing doesn't have type
hints (as in the example here), you'll need to specify the output column
type explicitly.

### Type Conversion with `astype`

Sometimes it's useful to transform an expression of one type into a
different type. For example, you can use `astype` to turn an expression
of type `pxt.Json` into one of type `pxt.String`. This assumes that the
value being converted is actually a string; otherwise, you'll get an
exception. Here's an example:

    Optional[Json]






    Optional[String]

### Column Properties

Some `ColumnRef` expressions have additional useful properties. A media
column (image, video, audio, or document) has the following two
properties:

-   `localpath`: the media location on the local filesystem
-   `fileurl`: the original URL where the media resides (could be the
    same as `localpath`)

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
image_localpath
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

::::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/46/460a/26d0c4b761ea4e0780e752dd225d0c0e_0_1_460adecd0552496abf4209871d423953</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/f0/f0a7/26d0c4b761ea4e0780e752dd225d0c0e_0_1_f0a7eb312a32475cb66a54fc4f213ebe</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/66/66d1/26d0c4b761ea4e0780e752dd225d0c0e_0_1_66d1f6bbcec543bc9d558f9e4025d26a</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA" width="28" / / />
            </div></td>
      <td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/41/4163/26d0c4b761ea4e0780e752dd225d0c0e_0_1_416302ffe83941938c47299b18f692c5</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA" width="28" / / />
            </div></td>
      <td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/7c/7c83/26d0c4b761ea4e0780e752dd225d0c0e_0_1_7c83911cefa840378399ff4ad26d59e1</td>
    </tr>

</tbody>
</table>

Any computed column will have two additional properties, `errortype` and
`errormsg`. These properties will usually be `None`. However, if the
computed column was created with `on_error='ignore'` and an exception
was encountered during column execution, then the properties will
contain additional information about the exception.

To demonstrate this feature, we're going to deliberately trigger an
exception in a computed column. The images in our example table are
black and white, meaning they have only one color channel. If we try to
extract a channel other than channel number `0`, we'll get an exception.
Ordinarily when we call `add_computed_column`, the exception is raised
and the `add_computed_column` operation is aborted.

    ---------------------------------------------------------------------------

    ValueError                                Traceback (most recent call last)

    File ~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/exec/expr_eval/evaluators.py:231, in FnCallEvaluator.eval(self, call_args_batch)
        230 try:
    --> 231     item.row[self.fn_call.slot_idx] = self.scalar_py_fn(*item.args, **item.kwargs)
        232 except Exception as exc:


    File /opt/miniconda3/envs/pxt/lib/python3.9/site-packages/PIL/Image.py:2664, in Image.getchannel(self, channel)
       2662         raise ValueError(msg) from e
    -> 2664 return self._new(self.im.getband(channel))


    ValueError: band index out of range


    The above exception was the direct cause of the following exception:


    Error                                     Traceback (most recent call last)

    Cell In[29], line 1
    ----> 1 t.add_computed_column(channel=t.image.getchannel(1))


    File ~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table.py:638, in Table.add_computed_column(self, stored, print_stats, on_error, if_exists, **kwargs)
        636 new_col = self._create_columns(\{col_name: col_schema\})[0]
        637 self._verify_column(new_col)
    --> 638 status = self._tbl_version.get().add_columns([new_col], print_stats=print_stats, on_error=on_error)
        639 FileCache.get().emit_eviction_warnings()
        640 return status


    File ~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table_version.py:597, in TableVersion.add_columns(self, cols, print_stats, on_error)
        595 preceding_schema_version = self.schema_version
        596 self.schema_version = self.version
    --> 597 status = self._add_columns(cols, print_stats=print_stats, on_error=on_error)
        598 for col in cols:
        599     _ = self._add_default_index(col)


    File ~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table_version.py:670, in TableVersion._add_columns(self, cols, print_stats, on_error)
        668     # we need to re-initialize the sqlalchemy schema
        669     self.store_tbl.create_sa_tbl()
    --> 670     raise exc
        671 finally:
        672     plan.close()


    File ~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table_version.py:653, in TableVersion._add_columns(self, cols, print_stats, on_error)
        651 plan.open()
        652 try:
    --> 653     num_excs = self.store_tbl.load_column(col, plan, value_expr_slot_idx, on_error)
        654 except sql.exc.DBAPIError as exc:
        655     # Wrap the DBAPIError in an excs.Error to unify processing in the subsequent except block
        656     raise excs.Error(f'SQL error during execution of computed column `\{col.name\}`:\n\{exc\}') from exc


    File ~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/store.py:268, in StoreBase.load_column(self, col, exec_plan, value_expr_slot_idx, on_error)
        266 value_exc = result_row.get_exc(value_expr_slot_idx)
        267 if on_error == 'abort':
    --> 268     raise excs.Error(
        269         f'Error while evaluating computed column `\{col.name\}`:\n\{value_exc\}'
        270     ) from value_exc
        271 # we store a NULL value and record the exception/exc type
        272 error_type = type(value_exc).__name__


    Error: Error while evaluating computed column `channel`:
    band index out of range

But if we use `on_error='ignore'`, the exception will be logged in the
column properties instead.

    Added 50 column values with 50 errors.





    UpdateStatus(num_rows="5"0, num_computed_values="5"0, num_excs="5"0, updated_cols=[], cols_with_excs=['mnist_tmp_32592145.channel'])

Notice that the update status informs us that there were 50 errors. If
we query the table, we see that the column contains only `None` values,
but the `errortype` and `errormsg` fields contain details of the error.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
image
</th>
<th>
channel
</th>
<th>
channel_errortype
</th>
<th>
channel_errormsg
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

:::::: \{.pxt_image style={{'width:28px;'}}\}
                <img src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA==" width="28" / / />
            </div></td>
      <td>None</td>
      <td>ValueError</td>
      <td>band index out of range</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA" width="28" / / />
            </div></td>
      <td>None</td>
      <td>ValueError</td>
      <td>band index out of range</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA" width="28" / / />
            </div></td>
      <td>None</td>
      <td>ValueError</td>
      <td>band index out of range</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA" width="28" / / />
            </div></td>
      <td>None</td>
      <td>ValueError</td>
      <td>band index out of range</td>
    </tr>
    <tr>
      <td><div className="pxt_image" style={{'width:28px;'}}>
                <img src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA" width="28" / / />
            </div></td>
      <td>None</td>
      <td>ValueError</td>
      <td>band index out of range</td>
    </tr>

</tbody>
</table>

More details on Pixeltable's error handling can be found in the [Working
with External
Files](https://docs.pixeltable.com/docs/working-with-external-files)
how-to guide.

## The Pixeltable Type System

We've seen that every column and every expression in Pixeltable has an
associated **Pixeltable type**. In this section, we'll briefly survey
the various Pixeltable types and their uses.

Here are all the supported types and their corresponding Python types:

  Pixeltable type   Python type
  ----------------- -------------------
  pxt.String        str
  pxt.Int           int
  pxt.Float         float
  pxt.Bool          bool
  pxt.Timestamp     datetime.datetime
  pxt.Json          \*\*
  pxt.Array         np.ndarray
  pxt.Image         PIL.Image.Image
  pxt.Video         str
  pxt.Audio         str
  pxt.Document      str

The Python type is what you'll get back if you query an expression of
the given Pixeltable type. For `pxt.Json`, it can be any of `str`,
`int`, `float`, `bool`, `list`, or `dict`.

::: \{.alert .alert-block .alert-info\}
`<code>`\{=html\}pxt.Audio`</code>`\{=html\},
`<code>`\{=html\}pxt.Video`</code>`\{=html\}, and
`<code>`\{=html\}pxt.Document`</code>`\{=html\} all correspond to the Python
type `<code>`\{=html\}str`</code>`\{=html\}. This is because those types are
represented by file paths that reference the media in question. When you
query for, say, `<code>`\{=html\}t.select(t.video_col)`</code>`\{=html\},
you're guaranteed to get a file path on the
`<i>`\{=html\}local`</i>`\{=html\} filesystem (Pixeltable will download and
cache a local copy of the video if necessary to ensure this). If you
want the original URL, use
`<code>`\{=html\}t.video_col.fileurl`</code>`\{=html\} instead.
:::

Several types can be **specialized** to constrain the allowable data in
a column.

-   `pxt.Image` can be specialized with a resolution and/or an image
    mode:
    -   `pxt.Image[(300,200)]` - images with width 300 and height 200
    -   `pxt.Image['RGB']` - images with mode `'RGB'`; see the [PIL
        Documentation](https://pillow.readthedocs.io/en/stable/handbook/concepts.html)
        for the full list
    -   `pxt.Image[(300,200), 'RGB']` - combines the above constraints
-   `pxt.Array` can be specialized with a shape and/or a dtype:
    -   `pxt.Array[pxt.Float]` - arrays with dtype `pxt.Float`
    -   `pxt.Array[(64,64,3), pxt.Float]` - 3-dimensional arrays with
        dtype `pxt.Float` and 64x64x3 shape

If we look at the structure of our table now, we see examples of
specialized image and array types.

<style type="text/css">
#T_bfc73_row0_col0 \{
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
\}
</style>
<table id="T_bfc73">
<thead>
</thead>
<tbody>
<tr>
<td id="T_bfc73_row0_col0" className="data row0 col0">
Table 'demo.mnist'
</td>
</tr>
</tbody>
</table>
<style type="text/css">
#T_092b2 th \{
  text-align: left;
\}
#T_092b2_row0_col0, #T_092b2_row0_col1, #T_092b2_row0_col2, #T_092b2_row1_col0, #T_092b2_row1_col1, #T_092b2_row1_col2, #T_092b2_row2_col0, #T_092b2_row2_col1, #T_092b2_row2_col2, #T_092b2_row3_col0, #T_092b2_row3_col1, #T_092b2_row3_col2, #T_092b2_row4_col0, #T_092b2_row4_col1, #T_092b2_row4_col2, #T_092b2_row5_col0, #T_092b2_row5_col1, #T_092b2_row5_col2 \{
  white-space: pre-wrap;
  text-align: left;
\}
</style>
<table id="T_092b2">
<thead>
<tr>
<th id="T_092b2_level0_col0" className="col_heading level0 col0">
Column Name
</th>
<th id="T_092b2_level0_col1" className="col_heading level0 col1">
Type
</th>
<th id="T_092b2_level0_col2" className="col_heading level0 col2">
Computed With
</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_092b2_row0_col0" className="data row0 col0">
image
</td>
<td id="T_092b2_row0_col1" className="data row0 col1">
Image
</td>
<td id="T_092b2_row0_col2" className="data row0 col2">
</td>
</tr>
<tr>
<td id="T_092b2_row1_col0" className="data row1 col0">
label
</td>
<td id="T_092b2_row1_col1" className="data row1 col1">
String
</td>
<td id="T_092b2_row1_col2" className="data row1 col2">
</td>
</tr>
<tr>
<td id="T_092b2_row2_col0" className="data row2 col0">
classification
</td>
<td id="T_092b2_row2_col1" className="data row2 col1">
Json
</td>
<td id="T_092b2_row2_col2" className="data row2 col2">
vit_for_image_classification(image,
model_id='farleyknight-org-username/vit-base-mnist')
</td>
</tr>
<tr>
<td id="T_092b2_row3_col0" className="data row3 col0">
pred_label
</td>
<td id="T_092b2_row3_col1" className="data row3 col1">
Json
</td>
<td id="T_092b2_row3_col2" className="data row3 col2">
classification.label_text\[0\]
</td>
</tr>
<tr>
<td id="T_092b2_row4_col0" className="data row4 col0">
clip
</td>
<td id="T_092b2_row4_col1" className="data row4 col1">
Array\[(512,), Float\]
</td>
<td id="T_092b2_row4_col2" className="data row4 col2">
clip(image, model_id='openai/clip-vit-base-patch32')
</td>
</tr>
<tr>
<td id="T_092b2_row5_col0" className="data row5 col0">
channel
</td>
<td id="T_092b2_row5_col1" className="data row5 col1">
Image\['L'\]
</td>
<td id="T_092b2_row5_col2" className="data row5 col2">
image.getchannel(1)
</td>
</tr>
</tbody>
</table>

`t.clip` has type `pxt.Array[(512,), pxt.Float]`, since the output of
the embedding is always a 1x512 array. `t.channel` has type
`Image['L']`, since it's always an `'L'` mode (1-channel) image.

::: \{.alert .alert-block .alert-info\}
You can freely use `<code>`\{=html\}pxt.Image`</code>`\{=html\} by itself to
mean "any image, without constraints", but numerical arrays must always
specify a shape and a dtype; `<code>`\{=html\}pxt.Array`</code>`\{=html\} by
itself will raise an error.
:::

::: \{.alert .alert-block .alert-info\}
Array shapes follow standard numpy conventions: a shape is a tuple of
integers, such as `<code>`\{=html\}(512,)`</code>`\{=html\} or
`<code>`\{=html\}(64,64,3)`</code>`\{=html\}. A
`<code>`\{=html\}None`</code>`\{=html\} may be used in place of an integer
to indicate an unconstrained size for that dimension, as in
`<code>`\{=html\}(None,None,3)`</code>`\{=html\} (3-dimensional array with
two unconstrained dimensions), or simply
`<code>`\{=html\}(None,)`</code>`\{=html\} (unconstrained 1-dimensional
array).
:::
::::::
:::::::
::::::::
:::::::::
::::::::::
:::::::::::
:::::::::::::
::::::::::::::
:::::::::::::::
::::::::::::::::
