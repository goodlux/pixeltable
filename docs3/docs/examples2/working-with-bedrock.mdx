---
title: "working with bedrock"
description: "Jupyter notebook example for Pixeltable"
---

[![Kaggle](https://kaggle.com/static/images/open-in-kaggle.svg)](https://kaggle.com/kernels/welcome?src=https://github.com/pixeltable/pixeltable/blob/release/docs/notebooks/integrations/working-with-bedrock.ipynb)  
[![Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/pixeltable/pixeltable/blob/release/docs/notebooks/integrations/working-with-bedrock.ipynb)  
`<a href="https://raw.githubusercontent.com/pixeltable/pixeltable/release/docs/notebooks/integrations/working-with-bedrock.ipynb" download>`\{=html\}`<img src="https://img.shields.io/badge/%E2%AC%87-Download%20Notebook-blue" alt="Download Notebook" / />`\{=html\}`</a>`\{=html\}

# Working with Bedrock in Pixeltable

Pixeltable's Bedrock integration enables you to access AWS Bedrock via
the Bedrock API.

### Prerequisites

-   Activate Bedrock in your AWS account.
-   Request access to your desired models (e.g. Claude Sonnet 3.7,
    Amazon Nova Pro)
-   Optional - you may need to configure AWS CLI locally to authenticate
    with your AWS account.

### Important Notes

-   Bedrock usage may incur costs based on your Bedrock plan.
-   Be mindful of sensitive data and consider security measures when
    integrating with external services.

First you'll need to install required libraries and enter an Bedrock API
key.

Now let's create a Pixeltable directory to hold the tables for our demo.

    Created directory 'bedrock_demo'.





    <pixeltable.catalog.dir.Dir at 0x1d4253ae930>

## Basic Messages

Create a Table: In Pixeltable, create a table with columns to represent
your input data and the columns where you want to store the results from
Bedrock.

    Created table `chat`.
    Added 0 column values with 0 errors.





    UpdateStatus(num_rows="0", num_computed_values="0", num_excs="0", updated_cols=[], cols_with_excs=[])



    Added 0 column values with 0 errors.





    UpdateStatus(num_rows="0", num_computed_values="0", num_excs="0", updated_cols=[], cols_with_excs=[])



    Inserting rows into `chat`: 1 rows [00:00, 147.54 rows/s]
    Inserted 1 row with 0 errors.

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
input
</th>
<th>
response
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
What was the outcome of the 1904 US Presidential election?
</td>
<td>

The 1904 United States Presidential election was held on November 8,
1904. The outcome was a victory for the incumbent President, Theodore
Roosevelt, who ran as the Republican candidate. Here are the key details
of the election:

### Candidates:

-   **Theodore Roosevelt (Republican Party)**: Incumbent President who
    had assumed office in 1901 following the assassination of President
    William McKinley.
-   **Alton B. Parker (Democratic Party)**: A New York judge and the
    Democratic nominee.
-   \*\*Euge ...... actions and conservation efforts, were popular.

2.  **Economic Prosperity**: The country was experiencing economic
    growth, which benefited the incumbent.
3.  **Personal Popularity**: Roosevelt's dynamic personality and
    vigorous campaign style resonated with the public.

Roosevelt's win in 1904 allowed him to implement his \"Square Deal\"
domestic program and continue his foreign policy initiatives, including
the construction of the Panama Canal and increased American influence in
global affairs.
</td>
</tr>
</tbody>
</table>

## Advanced: Tool-based Agent with Bedrock

Now let's create a more advanced example using Bedrock with tools for
news search and weather information.

    Created directory 'agents'.





    <pixeltable.catalog.dir.Dir at 0x1d4252acdd0>



    Created table `tools`.
    Added 0 column values with 0 errors.
    Added 0 column values with 0 errors.





    UpdateStatus(num_rows="0", num_computed_values="0", num_excs="0", updated_cols=[], cols_with_excs=[])



    Added 0 column values with 0 errors.
    Added 0 column values with 0 errors.
    Added 0 column values with 0 errors.





    UpdateStatus(num_rows="0", num_computed_values="0", num_excs="0", updated_cols=[], cols_with_excs=[])



    Inserting rows into `tools`: 1 rows [00:00, 168.89 rows/s]
    Inserted 1 row with 0 errors.

    Query: What's the latest news about SpaceX?
    Answer: Here's the latest news about SpaceX:

    1. **Starbase City Proposal**:
       - **Title**: The home of Elon Musk's SpaceX could become an official Texas city called Starbase
       - **Source**: The Associated Press
       - **Published**: 2025-04-30
       - **Snippet**: An election is scheduled for Saturday to determine whether a small area of coastal South Texas, which is home to SpaceX, will become an official city named Starbase.

    2. **250th Starlink Satellite Mission**:
       - **Title**: SpaceX launches 250th Starlink satellite mission, lands rocket at sea (video, photos)
       - **Source**: Space.com
       - **Published**: 2025-04-28
       - **Snippet**: SpaceX achieved a milestone by launching its 250th Starlink mission. A Falcon 9 rocket carrying 23 Starlink satellites, including 13 with direct-to-cell capability, lifted off from Cape Canaveral Space Force Station.

    3. **Back-to-Back Starlink Launches**:
       - **Title**: SpaceX Falcon 9 rocket launches 1st of 2 planned Starlink launches in 2 days, lands booster at sea (video)
       - **Source**: Space.com
       - **Published**: 2025-04-28
       - **Snippet**: SpaceX conducted its 49th Falcon 9 mission of 2025 and has another Starlink launch scheduled for later that night from Cape Canaveral Space Force Station.

    4. **Amazon’s Satellite Internet Competition**:
       - **Title**: Amazon Just Launched Its First Internet Satellites to Compete Against SpaceX's Starlink
       - **Source**: The Associated Press
       - **Published**: 2025-04-29
       - **Snippet**: Amazon launched its first set of internet satellites using an Atlas V rocket, aiming to compete with SpaceX's Starlink.

    5. **Recent Starlink Satellite Launch**:
       - **Title**: SpaceX launches batch of Starlink satellites into low-Earth orbit
       - **Source**: UPI
       - **Published**: 2025-04-28
       - **Snippet**: SpaceX launched a Falcon 9 rocket carrying nearly two dozen Starlink satellites into low-Earth orbit from Florida's east coast.
    Inserting rows into `tools`: 1 rows [00:00, 363.87 rows/s]
    Inserted 1 row with 0 errors.

    Query: What's the weather in San Francisco?
    Answer: Based on the tool output provided, here's the current weather in San Francisco:

    - **Temperature:** 72°F
    - **Condition:** Partly Cloudy

    If you need more detailed information or a forecast for the upcoming days, feel free to ask!

<table border="1" className="dataframe">
<thead>
<tr style={{'text-align: right;'}}>
<th>
prompt
</th>
<th>
answer
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
What\'s the latest news about SpaceX?
</td>
<td>

Here\'s the latest news about SpaceX:

1.  **Starbase City Proposal**:
    -   **Title**: The home of Elon Musk\'s SpaceX could become an
        official Texas city called Starbase
    -   **Source**: The Associated Press
    -   **Published**: 2025-04-30
    -   **Snippet**: An election is scheduled for Saturday to determine
        whether a small area of coastal South Texas, which is home to
        SpaceX, will become an official city named Starbase.
2.  **250th Starlink Satellite Mission**:
    -   **Title**: SpaceX launches 2 ...... Press
    -   **Published**: 2025-04-29
    -   **Snippet**: Amazon launched its first set of internet
        satellites using an Atlas V rocket, aiming to compete with
        SpaceX\'s Starlink.
3.  **Recent Starlink Satellite Launch**:
    -   **Title**: SpaceX launches batch of Starlink satellites into
        low-Earth orbit
    -   **Source**: UPI
    -   **Published**: 2025-04-28
    -   **Snippet**: SpaceX launched a Falcon 9 rocket carrying nearly
        two dozen Starlink satellites into low-Earth orbit from
        Florida\'s east coast.
        </td>
        </tr>
        <tr>
        <td>
        What\'s the weather in San Francisco?
        </td>
        <td>
        Based on the tool output provided, here\'s the current weather
        in San Francisco:

-   **Temperature:** 72°F
-   **Condition:** Partly Cloudy

If you need more detailed information or a forecast for the upcoming
days, feel free to ask!
</td>
</tr>
</tbody>
</table>

## How It Works

This notebook demonstrates two key Bedrock integration patterns:

1.  **Basic Message Completion**: Using the `bedrock.messages()`
    function to generate responses from Bedrock models.

2.  **Tool-based Agent**: Using `bedrock.converse()` and
    `bedrock.invoke_tools()` to create an agent that can:

    -   Analyze user queries
    -   Select appropriate tools (news search or weather)
    -   Execute the tools to retrieve information
    -   Generate a final response based on the tool output

This pattern demonstrates how Pixeltable can be used as an agent
engineering framework, allowing you to create complex, multi-step
workflows with LLMs and external tools.

### Learn More

To learn more about advanced techniques like RAG operations in
Pixeltable, check out the [RAG Operations in
Pixeltable](https://pixeltable.readme.io/docs/rag-operations-in-pixeltable)
tutorial.

For more on agent engineering with Pixeltable, see the [PixelAgent
documentation](https://pixeltable.readme.io/docs/pixelagent).

If you have any questions, don't hesitate to reach out.
